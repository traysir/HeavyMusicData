<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metal on the Road | Global Metal Band Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --bg-card: #141414;
            --bg-card-hover: #1a1a1a;
            --accent-red: #dc2626;
            --accent-orange: #f97316;
            --text-primary: #fafafa;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border-color: #27272a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* Noise texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 3rem 0 4rem;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 3rem;
            position: relative;
        }
        
        header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-red), transparent);
        }
        
        h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(3rem, 8vw, 6rem);
            letter-spacing: 0.05em;
            line-height: 1;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-red) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 300;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-orange));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .stat-card:hover {
            border-color: var(--accent-red);
            transform: translateY(-2px);
        }
        
        .stat-card:hover::before {
            opacity: 1;
        }
        
        .stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3rem;
            color: var(--accent-red);
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 0.5rem;
        }
        
        /* Section Titles */
        .section-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            letter-spacing: 0.05em;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .section-title::before {
            content: '';
            width: 4px;
            height: 1.5rem;
            background: var(--accent-red);
        }
        
        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        @media (max-width: 900px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
        }
        
        .chart-card h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        /* Country Table */
        .table-section {
            margin-bottom: 3rem;
        }
        
        .country-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        
        .country-table th,
        .country-table td {
            padding: 1rem 1.25rem;
            text-align: left;
        }
        
        .country-table th {
            background: #1a1a1a;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .country-table tr {
            border-bottom: 1px solid var(--border-color);
            transition: background 0.2s ease;
        }
        
        .country-table tr:hover {
            background: var(--bg-card-hover);
        }
        
        .country-table tr:last-child {
            border-bottom: none;
        }
        
        .rank {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.25rem;
            color: var(--accent-red);
            width: 50px;
        }
        
        .country-name {
            font-weight: 600;
        }
        
        .band-count {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
        }
        
        .genre-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(220, 38, 38, 0.15);
            border: 1px solid rgba(220, 38, 38, 0.3);
            border-radius: 999px;
            font-size: 0.75rem;
            color: var(--accent-red);
        }
        
        .percentage {
            color: var(--text-muted);
        }
        
        /* Progress bar for percentage */
        .progress-cell {
            width: 150px;
        }
        
        .progress-bar {
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 0.25rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-orange));
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        /* Regional Analysis */
        .region-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .region-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .region-card:hover {
            border-color: var(--accent-orange);
        }
        
        .region-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }
        
        .region-stats {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        .region-genres {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .region-genre {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            background: var(--bg-dark);
            border-radius: 4px;
            color: var(--text-muted);
        }
        
        .region-genre.top {
            background: rgba(249, 115, 22, 0.2);
            color: var(--accent-orange);
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 0;
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }
        
        footer p {
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        footer a {
            color: var(--accent-red);
            text-decoration: none;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        
        /* Spotify Section */
        .spotify-section {
            margin-bottom: 3rem;
        }
        
        .top-tracks-section {
            margin-top: 2rem;
        }
        
        .tracks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }
        
        .track-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.2s ease;
        }
        
        .track-card:hover {
            border-color: #1DB954;
            background: var(--bg-card-hover);
        }
        
        .track-rank {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: #1DB954;
            width: 30px;
            text-align: center;
        }
        
        .track-info {
            flex: 1;
            min-width: 0;
        }
        
        .track-name {
            font-weight: 600;
            font-size: 0.95rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .track-artist {
            color: var(--text-muted);
            font-size: 0.8rem;
        }
        
        .track-popularity {
            background: rgba(29, 185, 84, 0.15);
            border: 1px solid rgba(29, 185, 84, 0.3);
            color: #1DB954;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: help;
            position: relative;
        }
        
        .track-popularity:hover::after {
            content: 'Spotify Popularity Score (0-100). Calculated from total streams, recent plays, and listener engagement. Higher = more popular on Spotify.';
            position: absolute;
            bottom: calc(100% + 8px);
            right: 0;
            width: 220px;
            padding: 0.75rem;
            background: #1a1a1a;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 400;
            color: var(--text-secondary);
            line-height: 1.4;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        
        .track-popularity:hover::before {
            content: '';
            position: absolute;
            bottom: calc(100% + 2px);
            right: 12px;
            border: 6px solid transparent;
            border-top-color: #1a1a1a;
            z-index: 101;
        }
        
        .track-meta {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .genre-pill {
            background: rgba(220, 38, 38, 0.15);
            border: 1px solid rgba(220, 38, 38, 0.3);
            color: var(--accent-red);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }
        
        .listeners-count {
            color: var(--text-muted);
            font-size: 0.7rem;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Metal on the Road</h1>
            <p class="subtitle">Mapping 183,000+ Metal Bands Across 157 Countries</p>
        </header>
        
        <div class="stats-grid">
            <div class="stat-card animate-in delay-1">
                <div class="stat-value" id="total-bands">-</div>
                <div class="stat-label">Total Bands</div>
            </div>
            <div class="stat-card animate-in delay-2">
                <div class="stat-value" id="total-countries">-</div>
                <div class="stat-label">Countries</div>
            </div>
            <div class="stat-card animate-in delay-3">
                <div class="stat-value" id="top-country">-</div>
                <div class="stat-label">Top Country</div>
            </div>
            <div class="stat-card animate-in delay-4">
                <div class="stat-value" id="top-genre">-</div>
                <div class="stat-label">Top Genre</div>
            </div>
        </div>
        
        <div class="charts-grid">
            <div class="chart-card">
                <h3>Global Genre Distribution</h3>
                <div class="chart-container">
                    <canvas id="genre-chart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <h3>Top 10 Countries</h3>
                <div class="chart-container">
                    <canvas id="country-chart"></canvas>
                </div>
            </div>
        </div>
        
        <section class="table-section">
            <h2 class="section-title">Country Rankings</h2>
            <table class="country-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Country</th>
                        <th>Bands</th>
                        <th>Dominant Genre</th>
                        <th class="progress-cell">Global Share</th>
                    </tr>
                </thead>
                <tbody id="country-table-body">
                </tbody>
            </table>
        </section>
        
        <section>
            <h2 class="section-title">Regional Analysis</h2>
            <div class="region-grid" id="region-grid">
            </div>
        </section>
        
        <section class="spotify-section">
            <h2 class="section-title">Spotify Popularity Rankings</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 0.9rem;">
                Curated data from 50 heavy bands: metalcore, hardcore, deathcore, and death metal artists actively touring
            </p>
            
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Most Popular Artists</h3>
                    <div class="chart-container">
                        <canvas id="popularity-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>Bands by Genre</h3>
                    <div class="chart-container">
                        <canvas id="genre-breakdown-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="top-tracks-section">
                <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em;">
                    Top 10 Heavy Bands by Popularity
                </h3>
                <div class="tracks-grid" id="tracks-grid">
                </div>
            </div>
        </section>
        
        <footer>
            <p>Data: <a href="https://www.metal-archives.com/" target="_blank">Encyclopaedia Metallum</a> via <a href="https://www.kaggle.com/datasets/guimacrlh/every-metal-archives-band-october-2024" target="_blank">Kaggle</a> (Nov 2024)</p>
            <p style="margin-top: 0.5rem;">Analysis & Visualization by [Your Name]</p>
        </footer>
    </div>

    <script>
        // Dashboard data (embedded from Python analysis)
        const data = {"summary": {"total_bands": 183397, "total_countries": 157, "total_genres": 14, "top_country": "United States", "top_genre": "Black Metal"}, "countries": [{"Country": "United States", "Band_Count": 41386, "Dominant_Genre": "Death Metal", "Percentage": 22.57, "lat": 39.8, "lon": -98.5}, {"Country": "Germany", "Band_Count": 13840, "Dominant_Genre": "Black Metal", "Percentage": 7.55, "lat": 51.2, "lon": 10.4}, {"Country": "Brazil", "Band_Count": 8408, "Dominant_Genre": "Black Metal", "Percentage": 4.58, "lat": -14.2, "lon": -51.9}, {"Country": "Italy", "Band_Count": 8100, "Dominant_Genre": "Black Metal", "Percentage": 4.42, "lat": 41.9, "lon": 12.6}, {"Country": "United Kingdom", "Band_Count": 7513, "Dominant_Genre": "Black Metal", "Percentage": 4.1, "lat": 55.4, "lon": -3.4}, {"Country": "France", "Band_Count": 6749, "Dominant_Genre": "Black Metal", "Percentage": 3.68, "lat": 46.2, "lon": 2.2}, {"Country": "Canada", "Band_Count": 6354, "Dominant_Genre": "Black Metal", "Percentage": 3.46, "lat": 56.1, "lon": -106.3}, {"Country": "Russia", "Band_Count": 6237, "Dominant_Genre": "Black Metal", "Percentage": 3.4, "lat": 61.5, "lon": 105.3}, {"Country": "Sweden", "Band_Count": 5966, "Dominant_Genre": "Death Metal", "Percentage": 3.25, "lat": 60.1, "lon": 18.6}, {"Country": "Finland", "Band_Count": 5469, "Dominant_Genre": "Black Metal", "Percentage": 2.98, "lat": 61.9, "lon": 25.7}, {"Country": "Spain", "Band_Count": 5245, "Dominant_Genre": "Death Metal", "Percentage": 2.86, "lat": 40.5, "lon": -3.7}, {"Country": "Poland", "Band_Count": 4429, "Dominant_Genre": "Black Metal", "Percentage": 2.41, "lat": 51.9, "lon": 19.1}, {"Country": "Mexico", "Band_Count": 4414, "Dominant_Genre": "Death Metal", "Percentage": 2.41, "lat": 23.6, "lon": -102.6}, {"Country": "Australia", "Band_Count": 3745, "Dominant_Genre": "Death Metal", "Percentage": 2.04, "lat": -25.3, "lon": 133.8}, {"Country": "Argentina", "Band_Count": 3543, "Dominant_Genre": "Heavy Metal", "Percentage": 1.93, "lat": -38.4, "lon": -63.6}, {"Country": "Chile", "Band_Count": 3488, "Dominant_Genre": "Death Metal", "Percentage": 1.9, "lat": -35.7, "lon": -71.5}, {"Country": "Netherlands", "Band_Count": 3090, "Dominant_Genre": "Black Metal", "Percentage": 1.68, "lat": 52.1, "lon": 5.3}, {"Country": "Japan", "Band_Count": 3066, "Dominant_Genre": "Heavy Metal", "Percentage": 1.67, "lat": 36.2, "lon": 138.3}, {"Country": "Greece", "Band_Count": 2665, "Dominant_Genre": "Black Metal", "Percentage": 1.45, "lat": 39.1, "lon": 21.8}, {"Country": "Indonesia", "Band_Count": 2650, "Dominant_Genre": "Death Metal", "Percentage": 1.44, "lat": -0.8, "lon": 113.9}, {"Country": "Norway", "Band_Count": 2396, "Dominant_Genre": "Black Metal", "Percentage": 1.31, "lat": 60.5, "lon": 8.5}, {"Country": "Colombia", "Band_Count": 2388, "Dominant_Genre": "Black Metal", "Percentage": 1.3, "lat": 4.6, "lon": -74.3}, {"Country": "Czechia", "Band_Count": 1881, "Dominant_Genre": "Death Metal", "Percentage": 1.03, "lat": null, "lon": null}, {"Country": "International", "Band_Count": 1880, "Dominant_Genre": "Black Metal", "Percentage": 1.03, "lat": null, "lon": null}, {"Country": "Portugal", "Band_Count": 1686, "Dominant_Genre": "Black Metal", "Percentage": 0.92, "lat": 39.4, "lon": -8.2}, {"Country": "Belgium", "Band_Count": 1673, "Dominant_Genre": "Black Metal", "Percentage": 0.91, "lat": 50.5, "lon": 4.5}, {"Country": "Austria", "Band_Count": 1585, "Dominant_Genre": "Death Metal", "Percentage": 0.86, "lat": 47.5, "lon": 14.6}, {"Country": "Ukraine", "Band_Count": 1535, "Dominant_Genre": "Black Metal", "Percentage": 0.84, "lat": 48.4, "lon": 31.2}, {"Country": "Hungary", "Band_Count": 1447, "Dominant_Genre": "Black Metal", "Percentage": 0.79, "lat": 47.2, "lon": 19.5}, {"Country": "Switzerland", "Band_Count": 1383, "Dominant_Genre": "Death Metal", "Percentage": 0.75, "lat": 46.8, "lon": 8.2}], "genres": [{"genre": "Black Metal", "count": 46249}, {"genre": "Death Metal", "count": 45172}, {"genre": "Thrash Metal", "count": 21045}, {"genre": "Heavy Metal", "count": 16304}, {"genre": "Other", "count": 14559}, {"genre": "Doom/Stoner", "count": 13314}, {"genre": "Power/Symphonic", "count": 7281}, {"genre": "Progressive", "count": 7130}, {"genre": "Groove Metal", "count": 3789}, {"genre": "Grindcore", "count": 2561}, {"genre": "Core", "count": 2422}, {"genre": "Folk/Viking", "count": 1816}, {"genre": "Speed Metal", "count": 1228}, {"genre": "Industrial", "count": 527}], "regions": [{"Region": "Scandinavia", "Total_Bands": 15384, "Top_Genre": "Black Metal", "Top_Genre_Pct": 30.0, "Genre_Distribution": {"Black Metal": 4621, "Death Metal": 3960, "Heavy Metal": 1395, "Thrash Metal": 1252, "Doom/Stoner": 1163}}, {"Region": "Western Europe", "Total_Bands": 35833, "Top_Genre": "Black Metal", "Top_Genre_Pct": 26.7, "Genre_Distribution": {"Black Metal": 9554, "Death Metal": 8447, "Thrash Metal": 3775, "Heavy Metal": 3594, "Other": 2673}}, {"Region": "Southern Europe", "Total_Bands": 17696, "Top_Genre": "Black Metal", "Top_Genre_Pct": 22.9, "Genre_Distribution": {"Black Metal": 4054, "Death Metal": 3418, "Thrash Metal": 2155, "Heavy Metal": 2053, "Other": 1738}}, {"Region": "Eastern Europe", "Total_Bands": 14229, "Top_Genre": "Black Metal", "Top_Genre_Pct": 31.3, "Genre_Distribution": {"Black Metal": 4453, "Death Metal": 3313, "Other": 1318, "Thrash Metal": 1294, "Doom/Stoner": 991}}, {"Region": "North America", "Total_Bands": 47740, "Top_Genre": "Death Metal", "Top_Genre_Pct": 25.7, "Genre_Distribution": {"Death Metal": 12264, "Black Metal": 10607, "Thrash Metal": 5926, "Doom/Stoner": 4798, "Other": 3783}}, {"Region": "South America", "Total_Bands": 22241, "Top_Genre": "Death Metal", "Top_Genre_Pct": 24.5, "Genre_Distribution": {"Death Metal": 5454, "Black Metal": 5382, "Thrash Metal": 3404, "Heavy Metal": 2372, "Other": 1686}}, {"Region": "Asia", "Total_Bands": 7063, "Top_Genre": "Death Metal", "Top_Genre_Pct": 31.9, "Genre_Distribution": {"Death Metal": 2253, "Black Metal": 1127, "Heavy Metal": 770, "Thrash Metal": 713, "Power/Symphonic": 689}}, {"Region": "Oceania", "Total_Bands": 4349, "Top_Genre": "Death Metal", "Top_Genre_Pct": 29.0, "Genre_Distribution": {"Death Metal": 1263, "Black Metal": 1063, "Thrash Metal": 460, "Doom/Stoner": 424, "Other": 292}}], "genre_by_country": {"Argentina": {"Black Metal": 12.9, "Core": 0.8, "Death Metal": 16.9, "Doom/Stoner": 4.7, "Folk/Viking": 0.6, "Grindcore": 0.8, "Groove Metal": 3.2, "Heavy Metal": 22.0, "Industrial": 0.0, "Other": 11.7, "Power/Symphonic": 7.3, "Progressive": 2.7, "Speed Metal": 0.6, "Thrash Metal": 15.6}, "Australia": {"Black Metal": 24.4, "Core": 2.1, "Death Metal": 29.1, "Doom/Stoner": 9.2, "Folk/Viking": 0.4, "Grindcore": 2.6, "Groove Metal": 3.4, "Heavy Metal": 4.5, "Industrial": 0.3, "Other": 6.6, "Power/Symphonic": 1.9, "Progressive": 4.3, "Speed Metal": 0.3, "Thrash Metal": 10.8}, "Brazil": {"Black Metal": 26.5, "Core": 0.6, "Death Metal": 22.6, "Doom/Stoner": 4.3, "Folk/Viking": 0.6, "Grindcore": 1.7, "Groove Metal": 1.4, "Heavy Metal": 10.0, "Industrial": 0.1, "Other": 6.5, "Power/Symphonic": 4.6, "Progressive": 3.1, "Speed Metal": 1.0, "Thrash Metal": 17.0}, "Canada": {"Black Metal": 26.5, "Core": 2.0, "Death Metal": 26.0, "Doom/Stoner": 7.8, "Folk/Viking": 1.0, "Grindcore": 1.6, "Groove Metal": 1.9, "Heavy Metal": 5.9, "Industrial": 0.3, "Other": 6.9, "Power/Symphonic": 3.1, "Progressive": 4.8, "Speed Metal": 0.7, "Thrash Metal": 11.5}, "Finland": {"Black Metal": 29.1, "Core": 0.7, "Death Metal": 27.2, "Doom/Stoner": 7.4, "Folk/Viking": 1.3, "Grindcore": 1.0, "Groove Metal": 2.2, "Heavy Metal": 7.7, "Industrial": 0.3, "Other": 7.4, "Power/Symphonic": 4.2, "Progressive": 3.5, "Speed Metal": 0.7, "Thrash Metal": 7.4}, "France": {"Black Metal": 33.6, "Core": 1.2, "Death Metal": 22.6, "Doom/Stoner": 6.5, "Folk/Viking": 1.0, "Grindcore": 0.9, "Groove Metal": 1.7, "Heavy Metal": 7.3, "Industrial": 0.5, "Other": 7.2, "Power/Symphonic": 3.5, "Progressive": 4.8, "Speed Metal": 0.7, "Thrash Metal": 8.6}, "Germany": {"Black Metal": 26.5, "Core": 1.8, "Death Metal": 24.5, "Doom/Stoner": 5.0, "Folk/Viking": 1.4, "Grindcore": 0.9, "Groove Metal": 1.5, "Heavy Metal": 10.2, "Industrial": 0.2, "Other": 8.0, "Power/Symphonic": 4.2, "Progressive": 3.8, "Speed Metal": 0.9, "Thrash Metal": 11.1}, "Italy": {"Black Metal": 23.8, "Core": 0.7, "Death Metal": 18.9, "Doom/Stoner": 6.5, "Folk/Viking": 1.2, "Grindcore": 1.2, "Groove Metal": 1.9, "Heavy Metal": 9.9, "Industrial": 0.4, "Other": 9.3, "Power/Symphonic": 6.5, "Progressive": 6.7, "Speed Metal": 0.8, "Thrash Metal": 12.3}, "Mexico": {"Black Metal": 24.4, "Core": 0.8, "Death Metal": 29.3, "Doom/Stoner": 4.9, "Folk/Viking": 1.0, "Grindcore": 1.7, "Groove Metal": 1.6, "Heavy Metal": 8.0, "Industrial": 0.1, "Other": 8.4, "Power/Symphonic": 5.1, "Progressive": 2.8, "Speed Metal": 0.9, "Thrash Metal": 11.0}, "Poland": {"Black Metal": 30.8, "Core": 0.7, "Death Metal": 27.9, "Doom/Stoner": 6.4, "Folk/Viking": 1.4, "Grindcore": 1.5, "Groove Metal": 2.0, "Heavy Metal": 4.9, "Industrial": 0.5, "Other": 7.4, "Power/Symphonic": 1.6, "Progressive": 2.7, "Speed Metal": 0.5, "Thrash Metal": 11.8}, "Russia": {"Black Metal": 32.6, "Core": 0.9, "Death Metal": 20.7, "Doom/Stoner": 7.5, "Folk/Viking": 3.3, "Grindcore": 0.9, "Groove Metal": 1.8, "Heavy Metal": 7.0, "Industrial": 0.5, "Other": 10.1, "Power/Symphonic": 4.8, "Progressive": 2.4, "Speed Metal": 0.3, "Thrash Metal": 7.1}, "Spain": {"Black Metal": 16.1, "Core": 1.2, "Death Metal": 19.4, "Doom/Stoner": 6.3, "Folk/Viking": 1.3, "Grindcore": 1.7, "Groove Metal": 2.7, "Heavy Metal": 17.3, "Industrial": 0.3, "Other": 10.2, "Power/Symphonic": 6.9, "Progressive": 3.5, "Speed Metal": 0.5, "Thrash Metal": 12.7}, "Sweden": {"Black Metal": 25.0, "Core": 0.4, "Death Metal": 28.6, "Doom/Stoner": 7.7, "Folk/Viking": 1.1, "Grindcore": 0.7, "Groove Metal": 1.3, "Heavy Metal": 11.6, "Industrial": 0.3, "Other": 6.9, "Power/Symphonic": 4.4, "Progressive": 2.8, "Speed Metal": 0.5, "Thrash Metal": 8.7}, "United Kingdom": {"Black Metal": 21.0, "Core": 2.1, "Death Metal": 20.7, "Doom/Stoner": 12.7, "Folk/Viking": 0.8, "Grindcore": 1.1, "Groove Metal": 2.8, "Heavy Metal": 13.6, "Industrial": 0.4, "Other": 7.4, "Power/Symphonic": 2.5, "Progressive": 3.5, "Speed Metal": 0.3, "Thrash Metal": 11.1}, "United States": {"Black Metal": 21.6, "Core": 1.6, "Death Metal": 25.6, "Doom/Stoner": 10.4, "Folk/Viking": 0.3, "Grindcore": 1.6, "Groove Metal": 2.6, "Heavy Metal": 7.7, "Industrial": 0.3, "Other": 8.1, "Power/Symphonic": 2.4, "Progressive": 4.6, "Speed Metal": 0.7, "Thrash Metal": 12.5}}, "spotify": {"top_artists": [{"Artist": "Bring Me The Horizon", "Popularity": 78, "Genre": "Metalcore", "Subgenre": "Post-Hardcore", "Monthly_Listeners": 18500000, "Track_Count": 15}, {"Artist": "Slipknot", "Popularity": 75, "Genre": "Nu Metal", "Subgenre": "Heavy Metal", "Monthly_Listeners": 15200000, "Track_Count": 12}, {"Artist": "Sleep Token", "Popularity": 70, "Genre": "Progressive Metal", "Subgenre": "Alternative Metal", "Monthly_Listeners": 8500000, "Track_Count": 6}, {"Artist": "Gojira", "Popularity": 68, "Genre": "Death Metal", "Subgenre": "Progressive Death", "Monthly_Listeners": 5800000, "Track_Count": 10}, {"Artist": "Lamb of God", "Popularity": 65, "Genre": "Groove Metal", "Subgenre": "Thrash Metal", "Monthly_Listeners": 4200000, "Track_Count": 10}, {"Artist": "Turnstile", "Popularity": 65, "Genre": "Hardcore", "Subgenre": "Post-Hardcore", "Monthly_Listeners": 3200000, "Track_Count": 8}, {"Artist": "Architects", "Popularity": 64, "Genre": "Metalcore", "Subgenre": "Djent", "Monthly_Listeners": 4500000, "Track_Count": 12}, {"Artist": "Bad Omens", "Popularity": 63, "Genre": "Metalcore", "Subgenre": "Alternative Metal", "Monthly_Listeners": 3800000, "Track_Count": 8}, {"Artist": "Knocked Loose", "Popularity": 62, "Genre": "Hardcore", "Subgenre": "Metalcore", "Monthly_Listeners": 1800000, "Track_Count": 8}, {"Artist": "Parkway Drive", "Popularity": 61, "Genre": "Metalcore", "Subgenre": "Heavy Metal", "Monthly_Listeners": 3200000, "Track_Count": 10}, {"Artist": "Spiritbox", "Popularity": 60, "Genre": "Progressive Metal", "Subgenre": "Djent", "Monthly_Listeners": 2800000, "Track_Count": 8}, {"Artist": "Lorna Shore", "Popularity": 58, "Genre": "Deathcore", "Subgenre": "Symphonic Deathcore", "Monthly_Listeners": 2200000, "Track_Count": 6}, {"Artist": "August Burns Red", "Popularity": 58, "Genre": "Metalcore", "Subgenre": "Progressive Metal", "Monthly_Listeners": 2100000, "Track_Count": 10}, {"Artist": "Wage War", "Popularity": 56, "Genre": "Metalcore", "Subgenre": "Heavy Metal", "Monthly_Listeners": 1800000, "Track_Count": 8}, {"Artist": "Meshuggah", "Popularity": 56, "Genre": "Djent", "Subgenre": "Progressive Metal", "Monthly_Listeners": 1900000, "Track_Count": 10}, {"Artist": "Fit For a King", "Popularity": 55, "Genre": "Metalcore", "Subgenre": "Heavy Metal", "Monthly_Listeners": 1500000, "Track_Count": 8}, {"Artist": "Polaris", "Popularity": 54, "Genre": "Metalcore", "Subgenre": "Progressive Metal", "Monthly_Listeners": 1400000, "Track_Count": 8}, {"Artist": "Power Trip", "Popularity": 54, "Genre": "Crossover Thrash", "Subgenre": "Hardcore", "Monthly_Listeners": 980000, "Track_Count": 6}, {"Artist": "Code Orange", "Popularity": 52, "Genre": "Hardcore", "Subgenre": "Industrial Metal", "Monthly_Listeners": 850000, "Track_Count": 8}, {"Artist": "Currents", "Popularity": 52, "Genre": "Metalcore", "Subgenre": "Progressive Metal", "Monthly_Listeners": 1100000, "Track_Count": 6}, {"Artist": "Every Time I Die", "Popularity": 51, "Genre": "Metalcore", "Subgenre": "Hardcore", "Monthly_Listeners": 920000, "Track_Count": 10}, {"Artist": "Malevolence", "Popularity": 51, "Genre": "Metalcore", "Subgenre": "Groove Metal", "Monthly_Listeners": 720000, "Track_Count": 6}, {"Artist": "Kublai Khan TX", "Popularity": 50, "Genre": "Hardcore", "Subgenre": "Metalcore", "Monthly_Listeners": 680000, "Track_Count": 6}, {"Artist": "Gatecreeper", "Popularity": 50, "Genre": "Death Metal", "Subgenre": "Crust Punk", "Monthly_Listeners": 580000, "Track_Count": 6}, {"Artist": "Undeath", "Popularity": 49, "Genre": "Death Metal", "Subgenre": "Old School Death", "Monthly_Listeners": 520000, "Track_Count": 4}], "top_tracks": [{"Track": "Top Track", "Artist": "Bring Me The Horizon", "Album": "Post-Hardcore", "Year": 2024, "Popularity": 78, "Monthly_Listeners": 18500000, "Genre": "Metalcore"}, {"Track": "Top Track", "Artist": "Slipknot", "Album": "Heavy Metal", "Year": 2024, "Popularity": 75, "Monthly_Listeners": 15200000, "Genre": "Nu Metal"}, {"Track": "Top Track", "Artist": "Sleep Token", "Album": "Alternative Metal", "Year": 2024, "Popularity": 70, "Monthly_Listeners": 8500000, "Genre": "Progressive Metal"}, {"Track": "Top Track", "Artist": "Gojira", "Album": "Progressive Death", "Year": 2024, "Popularity": 68, "Monthly_Listeners": 5800000, "Genre": "Death Metal"}, {"Track": "Top Track", "Artist": "Lamb of God", "Album": "Thrash Metal", "Year": 2024, "Popularity": 65, "Monthly_Listeners": 4200000, "Genre": "Groove Metal"}, {"Track": "Top Track", "Artist": "Turnstile", "Album": "Post-Hardcore", "Year": 2024, "Popularity": 65, "Monthly_Listeners": 3200000, "Genre": "Hardcore"}, {"Track": "Top Track", "Artist": "Architects", "Album": "Djent", "Year": 2024, "Popularity": 64, "Monthly_Listeners": 4500000, "Genre": "Metalcore"}, {"Track": "Top Track", "Artist": "Bad Omens", "Album": "Alternative Metal", "Year": 2024, "Popularity": 63, "Monthly_Listeners": 3800000, "Genre": "Metalcore"}, {"Track": "Top Track", "Artist": "Knocked Loose", "Album": "Metalcore", "Year": 2024, "Popularity": 62, "Monthly_Listeners": 1800000, "Genre": "Hardcore"}, {"Track": "Top Track", "Artist": "Parkway Drive", "Album": "Heavy Metal", "Year": 2024, "Popularity": 61, "Monthly_Listeners": 3200000, "Genre": "Metalcore"}], "tier_stats": [{"Popularity_Tier": "Underground", "Avg_Listeners": 278824}, {"Popularity_Tier": "Cult", "Avg_Listeners": 777647}, {"Popularity_Tier": "Mainstream", "Avg_Listeners": 2863636}, {"Popularity_Tier": "Top Tier", "Avg_Listeners": 12000000}], "genre_breakdown": [{"Genre": "Crossover Thrash", "Popularity": 47.2, "Band_Count": 4, "Monthly_Listeners": 2010000}, {"Genre": "Death Metal", "Popularity": 48.9, "Band_Count": 8, "Monthly_Listeners": 8540000}, {"Genre": "Deathcore", "Popularity": 53.0, "Band_Count": 2, "Monthly_Listeners": 2950000}, {"Genre": "Djent", "Popularity": 56.0, "Band_Count": 1, "Monthly_Listeners": 1900000}, {"Genre": "Groove Metal", "Popularity": 65.0, "Band_Count": 1, "Monthly_Listeners": 4200000}, {"Genre": "Hardcore", "Popularity": 46.5, "Band_Count": 13, "Monthly_Listeners": 9380000}, {"Genre": "Melodic Hardcore", "Popularity": 45.0, "Band_Count": 2, "Monthly_Listeners": 1100000}, {"Genre": "Metalcore", "Popularity": 54.6, "Band_Count": 14, "Monthly_Listeners": 40200000}, {"Genre": "Nu Metal", "Popularity": 75.0, "Band_Count": 1, "Monthly_Listeners": 15200000}, {"Genre": "Progressive Metal", "Popularity": 65.0, "Band_Count": 2, "Monthly_Listeners": 11300000}, {"Genre": "Progressive Metalcore", "Popularity": 48.0, "Band_Count": 1, "Monthly_Listeners": 680000}], "total_tracks": 49, "total_artists": 49}};
        
        // Format numbers with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        // Populate summary stats
        document.getElementById('total-bands').textContent = formatNumber(data.summary.total_bands);
        document.getElementById('total-countries').textContent = data.summary.total_countries;
        document.getElementById('top-country').textContent = 'USA';
        document.getElementById('top-genre').textContent = 'Black';
        
        // Genre colors
        const genreColors = {
            'Black Metal': '#1a1a1a',
            'Death Metal': '#7f1d1d',
            'Thrash Metal': '#0f766e',
            'Heavy Metal': '#4338ca',
            'Doom/Stoner': '#6b21a8',
            'Power/Symphonic': '#c2410c',
            'Progressive': '#0369a1',
            'Grindcore': '#166534',
            'Core': '#9f1239',
            'Folk/Viking': '#854d0e',
            'Groove Metal': '#475569',
            'Speed Metal': '#0891b2',
            'Industrial': '#525252',
            'Other': '#3f3f46'
        };
        
        // Genre Chart
        const genreCtx = document.getElementById('genre-chart').getContext('2d');
        const genreData = data.genres.slice(0, 10);
        
        new Chart(genreCtx, {
            type: 'doughnut',
            data: {
                labels: genreData.map(g => g.genre),
                datasets: [{
                    data: genreData.map(g => g.count),
                    backgroundColor: genreData.map(g => genreColors[g.genre] || '#3f3f46'),
                    borderColor: '#0a0a0a',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            color: '#a1a1aa',
                            font: { size: 11 },
                            padding: 12
                        }
                    }
                },
                cutout: '60%'
            }
        });
        
        // Country Chart
        const countryCtx = document.getElementById('country-chart').getContext('2d');
        const countryData = data.countries.slice(0, 10);
        
        new Chart(countryCtx, {
            type: 'bar',
            data: {
                labels: countryData.map(c => c.Country),
                datasets: [{
                    data: countryData.map(c => c.Band_Count),
                    backgroundColor: 'rgba(220, 38, 38, 0.8)',
                    borderColor: 'rgba(220, 38, 38, 1)',
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        grid: { color: '#27272a' },
                        ticks: { color: '#71717a' }
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: '#a1a1aa', font: { size: 11 } }
                    }
                }
            }
        });
        
        // Country Table
        const tableBody = document.getElementById('country-table-body');
        data.countries.slice(0, 15).forEach((country, i) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="rank">${i + 1}</td>
                <td class="country-name">${country.Country}</td>
                <td class="band-count">${formatNumber(country.Band_Count)}</td>
                <td><span class="genre-tag">${country.Dominant_Genre}</span></td>
                <td class="progress-cell">
                    <span class="percentage">${country.Percentage}%</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${Math.min(country.Percentage * 4, 100)}%"></div>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });
        
        // Region Grid
        const regionGrid = document.getElementById('region-grid');
        data.regions.forEach(region => {
            const card = document.createElement('div');
            card.className = 'region-card';
            
            const genreKeys = Object.keys(region.Genre_Distribution);
            const genreTags = genreKeys.slice(0, 5).map((genre, i) => {
                const count = region.Genre_Distribution[genre];
                return `<span class="region-genre ${i === 0 ? 'top' : ''}">${genre.replace(' Metal', '')}: ${formatNumber(count)}</span>`;
            }).join('');
            
            card.innerHTML = `
                <div class="region-name">${region.Region}</div>
                <div class="region-stats">
                    ${formatNumber(region.Total_Bands)} bands Â· ${region.Top_Genre_Pct}% ${region.Top_Genre}
                </div>
                <div class="region-genres">${genreTags}</div>
            `;
            regionGrid.appendChild(card);
        });
        
        // Spotify Popularity Chart
        if (data.spotify && data.spotify.top_artists) {
            const popCtx = document.getElementById('popularity-chart').getContext('2d');
            const topArtists = data.spotify.top_artists.slice(0, 12);
            
            new Chart(popCtx, {
                type: 'bar',
                data: {
                    labels: topArtists.map(a => a.Artist),
                    datasets: [{
                        label: 'Popularity',
                        data: topArtists.map(a => a.Popularity),
                        backgroundColor: 'rgba(29, 185, 84, 0.8)',
                        borderColor: 'rgba(29, 185, 84, 1)',
                        borderWidth: 1,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            min: 0,
                            max: 100,
                            grid: { color: '#27272a' },
                            ticks: { color: '#71717a' },
                            title: {
                                display: true,
                                text: 'Spotify Popularity Score (0-100)',
                                color: '#71717a'
                            }
                        },
                        y: {
                            grid: { display: false },
                            ticks: { color: '#a1a1aa', font: { size: 10 } }
                        }
                    }
                }
            });
            
            // Genre Breakdown Chart
            const genreCtx2 = document.getElementById('genre-breakdown-chart').getContext('2d');
            const genreBreakdown = data.spotify.genre_breakdown || [];
            
            if (genreBreakdown.length > 0) {
                const genreColorsSpotify = {
                    'Metalcore': '#dc2626',
                    'Hardcore': '#f97316', 
                    'Death Metal': '#7f1d1d',
                    'Deathcore': '#991b1b',
                    'Crossover Thrash': '#0f766e',
                    'Progressive Metal': '#4338ca',
                    'Djent': '#6366f1',
                    'Nu Metal': '#7c3aed',
                    'Groove Metal': '#475569',
                    'Melodic Hardcore': '#ea580c'
                };
                
                new Chart(genreCtx2, {
                    type: 'doughnut',
                    data: {
                        labels: genreBreakdown.map(g => g.Genre),
                        datasets: [{
                            data: genreBreakdown.map(g => g.Band_Count),
                            backgroundColor: genreBreakdown.map(g => genreColorsSpotify[g.Genre] || '#3f3f46'),
                            borderColor: '#0a0a0a',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: { color: '#a1a1aa', font: { size: 10 }, padding: 8 }
                            },
                            tooltip: {
                                callbacks: {
                                    afterLabel: function(context) {
                                        const genre = genreBreakdown[context.dataIndex];
                                        return `Avg Popularity: ${genre.Popularity}`;
                                    }
                                }
                            }
                        },
                        cutout: '55%'
                    }
                });
            }
            
            // Top Tracks Grid (now showing top bands)
            const tracksGrid = document.getElementById('tracks-grid');
            const topTracks = data.spotify.top_tracks.slice(0, 10);
            
            topTracks.forEach((track, i) => {
                const card = document.createElement('div');
                card.className = 'track-card';
                
                // Format monthly listeners
                const listeners = track.Monthly_Listeners;
                let listenerStr = '';
                if (listeners >= 1000000) {
                    listenerStr = (listeners / 1000000).toFixed(1) + 'M monthly listeners';
                } else if (listeners >= 1000) {
                    listenerStr = (listeners / 1000).toFixed(0) + 'K monthly listeners';
                } else {
                    listenerStr = listeners + ' monthly listeners';
                }
                
                card.innerHTML = `
                    <div class="track-rank">${i + 1}</div>
                    <div class="track-info">
                        <div class="track-name">${track.Artist}</div>
                        <div class="track-meta">
                            <span class="genre-pill">${track.Genre}</span>
                            <span class="listeners-count">${listenerStr}</span>
                        </div>
                    </div>
                    <div class="track-popularity" title="Spotify Popularity Score">${track.Popularity}</div>
                `;
                tracksGrid.appendChild(card);
            });
        }
    </script>
</body>
</html>
